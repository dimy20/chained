{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\FetchImagesFromApi\\\\FetchImagesFromApi.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport ImagesContext from \"../../ImagesContext\";\nimport axios from \"axios\";\nexport default function FetchImagesFromApi(props) {\n  const {\n    render,\n    query,\n    pageNumber\n  } = props;\n  const [Loading, setLoading] = useState(true);\n  const [Err, setErr] = useState(false);\n  const [ImgArr, setImgArr] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const {\n    ImgArrContext,\n    setImgArrContext\n  } = useContext(ImagesContext);\n  useEffect(() => {\n    setImgArrContext(ImgArr);\n    console.log(ImgArrContext);\n  }, [ImgArr]);\n  useEffect(() => {\n    setImgArr([]);\n  }, [query]);\n  useEffect(() => {\n    setLoading(true);\n    let cancel;\n    axios({\n      method: \"GET\",\n      url: `https://pixabay.com/api/?key=16381049-c197cfa5caeabac8c93d8da2c&q=${query}&image_type=photo&per_page=${21}&page=${pageNumber}`,\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(response => {\n      //FIX THIS REPETTITIOS\n      console.log(response.data.hits[0].id);\n      setImgArr(prevImgs => {\n        return [...new Set([...prevImgs, ...response.data.hits])];\n      });\n      setLoading(false);\n    }).catch(err => {\n      //ignore everytime we cancel the request\n      if (axios.isCancel(err)) {\n        return;\n      }\n\n      setErr(true);\n    });\n    return () => cancel();\n  }, [query, pageNumber]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, render(Loading, ImgArr));\n}","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/FetchImagesFromApi/FetchImagesFromApi.js"],"names":["React","useContext","useState","useEffect","ImagesContext","axios","FetchImagesFromApi","props","render","query","pageNumber","Loading","setLoading","Err","setErr","ImgArr","setImgArr","hasMore","setHasMore","ImgArrContext","setImgArrContext","console","log","cancel","method","url","cancelToken","CancelToken","c","then","response","data","hits","id","prevImgs","Set","catch","err","isCancel"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AACjD,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAAgCH,KAAtC;AACA,QAAM,CAACI,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACW,GAAD,EAAMC,MAAN,IAAgBZ,QAAQ,CAAC,KAAD,CAA9B;AACA,QAAM,CAACa,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAEiB,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAAsCnB,UAAU,CAACG,aAAD,CAAtD;AACAD,EAAAA,SAAS,CAAC,MAAM;AACfiB,IAAAA,gBAAgB,CAACL,MAAD,CAAhB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYH,aAAZ;AACA,GAHQ,EAGN,CAACJ,MAAD,CAHM,CAAT;AAIAZ,EAAAA,SAAS,CAAC,MAAM;AACfa,IAAAA,SAAS,CAAC,EAAD,CAAT;AACA,GAFQ,EAEN,CAACP,KAAD,CAFM,CAAT;AAIAN,EAAAA,SAAS,CAAC,MAAM;AACfS,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIW,MAAJ;AACAlB,IAAAA,KAAK,CAAC;AACLmB,MAAAA,MAAM,EAAE,KADH;AAELC,MAAAA,GAAG,EAAG,qEAAoEhB,KAAM,8BAA6B,EAAG,SAAQC,UAAW,EAF9H;AAGLgB,MAAAA,WAAW,EAAE,IAAIrB,KAAK,CAACsB,WAAV,CAAuBC,CAAD,IAAQL,MAAM,GAAGK,CAAvC;AAHR,KAAD,CAAL,CAKEC,IALF,CAKQC,QAAD,IAAc;AACnB;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmB,CAAnB,EAAsBC,EAAlC;AACAjB,MAAAA,SAAS,CAAEkB,QAAD,IAAc;AACvB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,QAAJ,EAAc,GAAGJ,QAAQ,CAACC,IAAT,CAAcC,IAA/B,CAAR,CAAJ,CAAP;AACA,OAFQ,CAAT;AAGApB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA,KAZF,EAaEwB,KAbF,CAaSC,GAAD,IAAS;AACf;AACA,UAAIhC,KAAK,CAACiC,QAAN,CAAeD,GAAf,CAAJ,EAAyB;AACxB;AACA;;AACDvB,MAAAA,MAAM,CAAC,IAAD,CAAN;AACA,KAnBF;AAoBA,WAAO,MAAMS,MAAM,EAAnB;AACA,GAxBQ,EAwBN,CAACd,KAAD,EAAQC,UAAR,CAxBM,CAAT;AAyBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMF,MAAM,CAACG,OAAD,EAAUI,MAAV,CAAZ,CAAP;AACA","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport ImagesContext from \"../../ImagesContext\";\r\nimport axios from \"axios\";\r\nexport default function FetchImagesFromApi(props) {\r\n\tconst { render, query, pageNumber } = props;\r\n\tconst [Loading, setLoading] = useState(true);\r\n\tconst [Err, setErr] = useState(false);\r\n\tconst [ImgArr, setImgArr] = useState([]);\r\n\tconst [hasMore, setHasMore] = useState(false);\r\n\tconst { ImgArrContext, setImgArrContext } = useContext(ImagesContext);\r\n\tuseEffect(() => {\r\n\t\tsetImgArrContext(ImgArr);\r\n\t\tconsole.log(ImgArrContext);\r\n\t}, [ImgArr]);\r\n\tuseEffect(() => {\r\n\t\tsetImgArr([]);\r\n\t}, [query]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true);\r\n\t\tlet cancel;\r\n\t\taxios({\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: `https://pixabay.com/api/?key=16381049-c197cfa5caeabac8c93d8da2c&q=${query}&image_type=photo&per_page=${21}&page=${pageNumber}`,\r\n\t\t\tcancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t//FIX THIS REPETTITIOS\r\n\t\t\t\tconsole.log(response.data.hits[0].id);\r\n\t\t\t\tsetImgArr((prevImgs) => {\r\n\t\t\t\t\treturn [...new Set([...prevImgs, ...response.data.hits])];\r\n\t\t\t\t});\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t//ignore everytime we cancel the request\r\n\t\t\t\tif (axios.isCancel(err)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetErr(true);\r\n\t\t\t});\r\n\t\treturn () => cancel();\r\n\t}, [query, pageNumber]);\r\n\treturn <div>{render(Loading, ImgArr)}</div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}