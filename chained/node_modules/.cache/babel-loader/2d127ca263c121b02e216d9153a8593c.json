{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\InfiniteScroll\\\\InfiniteScroll.js\";\nimport React, { useContext, useRef, useCallback, useState } from \"react\";\nimport PageNumberContext from \"../../PageNumberContext\";\nexport default function InfiniteScroll(props) {\n  const {\n    render,\n    Loading\n  } = props;\n  /* const [imgNumber, setimgNumber] = useState(initialPageNumber); */\n\n  const {\n    PageNumber,\n    setPageNumber\n  } = useContext(PageNumberContext);\n  const observer = useRef();\n  const lastImgElement = useCallback(node => {\n    if (Loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      console.log(entries);\n\n      if (entries[0].isIntersecting) {\n        console.log(\"visible\");\n        setPageNumber(PrevPageNumber => PrevPageNumber + 1);\n      }\n    });\n\n    if (node) {\n      observer.current.observe(node);\n    }\n\n    console.log(node);\n  }, [Loading]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, render(lastImgElement, imgNumber));\n}","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/InfiniteScroll/InfiniteScroll.js"],"names":["React","useContext","useRef","useCallback","useState","PageNumberContext","InfiniteScroll","props","render","Loading","PageNumber","setPageNumber","observer","lastImgElement","node","current","disconnect","IntersectionObserver","entries","console","log","isIntersecting","PrevPageNumber","observe","imgNumber"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,MAA5B,EAAoCC,WAApC,EAAiDC,QAAjD,QAAiE,OAAjE;AACA,OAAOC,iBAAP,MAA8B,yBAA9B;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7C,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAsBF,KAA5B;AACA;;AACA,QAAM;AAAEG,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAgCV,UAAU,CAACI,iBAAD,CAAhD;AACA,QAAMO,QAAQ,GAAGV,MAAM,EAAvB;AACA,QAAMW,cAAc,GAAGV,WAAW,CAChCW,IAAD,IAAU;AACT,QAAIL,OAAJ,EAAa;AACb,QAAIG,QAAQ,CAACG,OAAb,EAAsBH,QAAQ,CAACG,OAAT,CAAiBC,UAAjB;AAEtBJ,IAAAA,QAAQ,CAACG,OAAT,GAAmB,IAAIE,oBAAJ,CAA0BC,OAAD,IAAa;AACxDC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;;AACA,UAAIA,OAAO,CAAC,CAAD,CAAP,CAAWG,cAAf,EAA+B;AAC9BF,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAT,QAAAA,aAAa,CAAEW,cAAD,IAAoBA,cAAc,GAAG,CAAtC,CAAb;AACA;AACD,KANkB,CAAnB;;AAOA,QAAIR,IAAJ,EAAU;AACTF,MAAAA,QAAQ,CAACG,OAAT,CAAiBQ,OAAjB,CAAyBT,IAAzB;AACA;;AACDK,IAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACA,GAhBgC,EAiBjC,CAACL,OAAD,CAjBiC,CAAlC;AAoBA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMD,MAAM,CAACK,cAAD,EAAiBW,SAAjB,CAAZ,CAAP;AACA","sourcesContent":["import React, { useContext, useRef, useCallback, useState } from \"react\";\r\nimport PageNumberContext from \"../../PageNumberContext\";\r\n\r\nexport default function InfiniteScroll(props) {\r\n\tconst { render, Loading } = props;\r\n\t/* const [imgNumber, setimgNumber] = useState(initialPageNumber); */\r\n\tconst { PageNumber, setPageNumber } = useContext(PageNumberContext);\r\n\tconst observer = useRef();\r\n\tconst lastImgElement = useCallback(\r\n\t\t(node) => {\r\n\t\t\tif (Loading) return;\r\n\t\t\tif (observer.current) observer.current.disconnect();\r\n\r\n\t\t\tobserver.current = new IntersectionObserver((entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0].isIntersecting) {\r\n\t\t\t\t\tconsole.log(\"visible\");\r\n\t\t\t\t\tsetPageNumber((PrevPageNumber) => PrevPageNumber + 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (node) {\r\n\t\t\t\tobserver.current.observe(node);\r\n\t\t\t}\r\n\t\t\tconsole.log(node);\r\n\t\t},\r\n\t\t[Loading]\r\n\t);\r\n\r\n\treturn <div>{render(lastImgElement, imgNumber)}</div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}