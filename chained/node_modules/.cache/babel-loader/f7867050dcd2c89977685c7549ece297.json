{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\Home\\\\Home.js\";\nimport React, { useState, useContext, useEffect, useRef, useCallback } from 'react';\nimport Styles from './Home.module.css';\nimport { CircularProgress } from '@material-ui/core'; //components\n\nimport Card from './Card/Card'; //hooks \n\nimport useHome from './useHome'; //context\n\nimport SearchContext from '../../SearchContext';\nimport ImagesContext from '../../ImagesContext';\n\nconst Home = ({\n  history\n}) => {\n  const {\n    SearchString,\n    setSearchString\n  } = useContext(SearchContext);\n  const [imgNumber, setimgNumber] = useState(1);\n  const {\n    Loading,\n    err,\n    ImgArr,\n    hasMore\n  } = useHome(SearchString, imgNumber);\n  const observer = useRef();\n  const lastImgElement = useCallback(node => {\n    if (Loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      console.log(entries);\n\n      if (entries[0].isIntersecting) {\n        console.log('visible');\n        setimgNumber(previmgNumber => previmgNumber + 1);\n      }\n    });\n\n    if (node) {\n      observer.current.observe(node);\n    }\n\n    console.log(node);\n  }, [Loading]);\n  console.log(ImgArr);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, Loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.loadingContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: Styles.Loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, \"Loading...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.CardContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, ImgArr.map((img, index) => {\n    if (ImgArr.length === index + 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: lastImgElement,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        key: img.id,\n        src: img.largeImageURL,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 57\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(Card, {\n        key: img.id,\n        src: img.largeImageURL,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 28\n        }\n      });\n    }\n  })));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/Home/Home.js"],"names":["React","useState","useContext","useEffect","useRef","useCallback","Styles","CircularProgress","Card","useHome","SearchContext","ImagesContext","Home","history","SearchString","setSearchString","imgNumber","setimgNumber","Loading","err","ImgArr","hasMore","observer","lastImgElement","node","current","disconnect","IntersectionObserver","entries","console","log","isIntersecting","previmgNumber","observe","container","loadingContainer","CardContainer","map","img","index","length","id","largeImageURL"],"mappings":"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","sourcesContent":["import React, { useState,useContext, useEffect, useRef, useCallback } from 'react';\r\nimport Styles from './Home.module.css';\r\nimport {CircularProgress} from '@material-ui/core';\r\n\r\n//components\r\nimport Card from './Card/Card';\r\n//hooks \r\nimport useHome from './useHome';\r\n//context\r\nimport SearchContext from '../../SearchContext';\r\nimport ImagesContext from '../../ImagesContext';\r\nconst Home = ({history})=>{\r\n\r\n    const {SearchString,setSearchString} = useContext(SearchContext);\r\n\r\n    const [imgNumber,setimgNumber] = useState(1);\r\n    const {Loading,err,ImgArr,hasMore} = useHome(SearchString,imgNumber);\r\n\r\n    const observer = useRef();\r\n    const lastImgElement = useCallback((node)=>{\r\n        if(Loading) return;\r\n        if(observer.current) observer.current.disconnect();\r\n\r\n        observer.current = new IntersectionObserver(entries=>{\r\n            console.log(entries);\r\n            if(entries[0].isIntersecting){\r\n                console.log('visible');\r\n                setimgNumber(previmgNumber=>previmgNumber+1);\r\n            }\r\n        })\r\n        if(node){\r\n            observer.current.observe(node);\r\n        }\r\n        console.log(node);\r\n    },[Loading])\r\n    console.log(ImgArr)\r\n    \r\n    return (\r\n        <div className = {Styles.container}>\r\n            {Loading &&\r\n               <div className = {Styles.loadingContainer}>\r\n                    <h1 className ={Styles.Loading}>Loading...</h1>\r\n               </div>        \r\n            }\r\n            <div className = {Styles.CardContainer}>\r\n            {ImgArr.map((img,index)=>{\r\n                if(ImgArr.length === index +1){\r\n                    return  <div ref = {lastImgElement}><Card key = {img.id} src = {img.largeImageURL}  ></Card></div> \r\n                }else{ \r\n                    return <Card key = {img.id} src = {img.largeImageURL}></Card>\r\n                }\r\n               \r\n            })}\r\n            </div>   \r\n        </div>      \r\n\r\n    )\r\n}\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}