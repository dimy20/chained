{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\Home\\\\Home.js\";\nimport React, { useState, useContext, useEffect, useRef, useCallback } from \"react\";\nimport Styles from \"./Home.module.css\";\nimport { CircularProgress } from \"@material-ui/core\"; //components\n\nimport Card from \"./Card/Card\"; //hooks\n\nimport useHome from \"./useHome\"; //context\n\nimport SearchContext from \"../../SearchContext\";\nimport ImagesContext from \"../../ImagesContext\";\nimport PageNumberContext from \"../../PageNumberContext\";\nimport LoadingContext from \"../../LoadingContext\"; //issue#2\n\nimport FetchImagesFromApi from \"../FetchImages/FetchImagesFromApi\";\nimport InfiniteScroll from \"../InfiniteScroll/InfiniteScroll\";\n\nconst Home = ({\n  history\n}) => {\n  const {\n    SearchString,\n    setSearchString\n  } = useContext(SearchContext);\n  const [PageNumber, setPageNumber] = useState(1);\n  const {\n    Loading,\n    setLoading\n  } = useState(true);\n  /* const [imgNumber, setimgNumber] = useState(1);\r\n  //const { Loading, err, ImgArr, hasMore } = useHome(SearchString, imgNumber);\r\n  \n  const observer = useRef();\r\n  const lastImgElement = useCallback(\r\n  \t(node) => {\r\n  \t\tif (Loading) return;\r\n  \t\tif (observer.current) observer.current.disconnect();\r\n  \n  \t\tobserver.current = new IntersectionObserver((entries) => {\r\n  \t\t\tconsole.log(entries);\r\n  \t\t\tif (entries[0].isIntersecting) {\r\n  \t\t\t\tconsole.log(\"visible\");\r\n  \t\t\t\tsetimgNumber((previmgNumber) => previmgNumber + 1);\r\n  \t\t\t}\r\n  \t\t});\r\n  \t\tif (node) {\r\n  \t\t\tobserver.current.observe(node);\r\n  \t\t}\r\n  \t\tconsole.log(node);\r\n  \t},\r\n  \t[Loading]\r\n  );\r\n  console.log(ImgArr);\r\n  */\n\n  return /*#__PURE__*/React.createElement(PageNumberContext.Provider, {\n    value: {\n      PageNumber,\n      setPageNumber\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    Loading: Loading,\n    render: lastImgElement => {\n      return /*#__PURE__*/React.createElement(FetchImagesFromApi, {\n        query: SearchString,\n        PageNumber: PageNumber,\n        render: (ImgArr, Loading) => {\n          console.log(\"hola\", ImgArr);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: Styles.container,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 10\n            }\n          }, Loading && /*#__PURE__*/React.createElement(\"div\", {\n            className: Styles.loadingContainer,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 12\n            }\n          }, /*#__PURE__*/React.createElement(\"h1\", {\n            className: Styles.Loading,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 13\n            }\n          }, \"Loading...\")), /*#__PURE__*/React.createElement(\"div\", {\n            className: Styles.CardContainer,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 11\n            }\n          }, ImgArr.map((img, index) => {\n            if (ImgArr.length === index + 1) {\n              return /*#__PURE__*/React.createElement(\"div\", {\n                ref: lastImgElement,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 15\n                }\n              }, /*#__PURE__*/React.createElement(Card, {\n                key: img.id,\n                src: img.largeImageURL,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 16\n                }\n              }));\n            } else {\n              return /*#__PURE__*/React.createElement(Card, {\n                history: history,\n                key: img.id,\n                src: img.largeImageURL,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 15\n                }\n              });\n            }\n          })), \");\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/Home/Home.js"],"names":["React","useState","useContext","useEffect","useRef","useCallback","Styles","CircularProgress","Card","useHome","SearchContext","ImagesContext","PageNumberContext","LoadingContext","FetchImagesFromApi","InfiniteScroll","Home","history","SearchString","setSearchString","PageNumber","setPageNumber","Loading","setLoading","lastImgElement","ImgArr","console","log","container","loadingContainer","CardContainer","map","img","index","length","id","largeImageURL"],"mappings":"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","sourcesContent":["import React, {\r\n\tuseState,\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseCallback,\r\n} from \"react\";\r\nimport Styles from \"./Home.module.css\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\n//components\r\nimport Card from \"./Card/Card\";\r\n//hooks\r\nimport useHome from \"./useHome\";\r\n//context\r\nimport SearchContext from \"../../SearchContext\";\r\nimport ImagesContext from \"../../ImagesContext\";\r\nimport PageNumberContext from \"../../PageNumberContext\";\r\nimport LoadingContext from \"../../LoadingContext\";\r\n//issue#2\r\nimport FetchImagesFromApi from \"../FetchImages/FetchImagesFromApi\";\r\nimport InfiniteScroll from \"../InfiniteScroll/InfiniteScroll\";\r\nconst Home = ({ history }) => {\r\n\tconst { SearchString, setSearchString } = useContext(SearchContext);\r\n\tconst [PageNumber, setPageNumber] = useState(1);\r\n\tconst { Loading, setLoading } = useState(true);\r\n\r\n\t/* const [imgNumber, setimgNumber] = useState(1);\r\n\t//const { Loading, err, ImgArr, hasMore } = useHome(SearchString, imgNumber);\r\n\r\n\tconst observer = useRef();\r\n\tconst lastImgElement = useCallback(\r\n\t\t(node) => {\r\n\t\t\tif (Loading) return;\r\n\t\t\tif (observer.current) observer.current.disconnect();\r\n\r\n\t\t\tobserver.current = new IntersectionObserver((entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0].isIntersecting) {\r\n\t\t\t\t\tconsole.log(\"visible\");\r\n\t\t\t\t\tsetimgNumber((previmgNumber) => previmgNumber + 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (node) {\r\n\t\t\t\tobserver.current.observe(node);\r\n\t\t\t}\r\n\t\t\tconsole.log(node);\r\n\t\t},\r\n\t\t[Loading]\r\n\t);\r\n\tconsole.log(ImgArr);\r\n */\r\n\treturn (\r\n\t\t<PageNumberContext.Provider value={{ PageNumber, setPageNumber }}>\r\n\t\t\t<InfiniteScroll\r\n\t\t\t\tLoading={Loading}\r\n\t\t\t\trender={(lastImgElement) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<FetchImagesFromApi\r\n\t\t\t\t\t\t\tquery={SearchString}\r\n\t\t\t\t\t\t\tPageNumber={PageNumber}\r\n\t\t\t\t\t\t\trender={(ImgArr, Loading) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"hola\", ImgArr);\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className={Styles.container}>\r\n\t\t\t\t\t\t\t\t\t\t{Loading && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={Styles.loadingContainer}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1 className={Styles.Loading}>Loading...</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<div className={Styles.CardContainer}>\r\n\t\t\t\t\t\t\t\t\t\t\t{ImgArr.map((img, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (ImgArr.length === index + 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ref={lastImgElement}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card key={img.id} src={img.largeImageURL}></Card>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={img.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={img.largeImageURL}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></Card>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t></FetchImagesFromApi>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t></InfiniteScroll>\r\n\t\t</PageNumberContext.Provider>\r\n\t);\r\n};\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}