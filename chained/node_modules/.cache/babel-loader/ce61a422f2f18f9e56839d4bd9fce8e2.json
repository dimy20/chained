{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\Pin\\\\MoreLikeThis\\\\MoreLikeThis.js\";\nimport React, { useContext, useState, useRef, useCallback } from \"react\";\nimport Styles from \"./MoreLikeThis.module.css\";\n/* import PinsDisplaySection from \"./PinsDisplaySection/PinsDisplaySection\"; */\n\nimport CardCollection from \"../../CardCollection/CardCollection\";\nimport FetchImagesFromApi from \"../../FetchImagesFromApi/FetchImagesFromApi\";\nimport LoadingContext from \"../../../LoadingContext\";\nexport default function MoreLikeThis(props) {\n  /* const { lastImgElement } = useInfiniteScroll(); */\n  const {\n    history\n  } = props;\n  const [Loading, setLoading] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const observer = useRef();\n\n  const GetTags = tags => {\n    let res = \"\";\n\n    for (let i = 0; i < tags.length - 1; i++) {\n      if (tags[i] != \",\") {\n        res = res + tags[i];\n      }\n    }\n\n    return res;\n  };\n\n  const FirstTag = string => {\n    let res = \"\";\n\n    for (let i = 0; i < string.length - 1; i++) {\n      if (string[i] == \" \") break;\n      res = res + string[i];\n    }\n\n    return res;\n  };\n\n  const lastImgElement = useCallback(node => {\n    if (Loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      console.log(entries);\n\n      if (entries[0].isIntersecting) {\n        console.log(\"visible\");\n        setPageNumber(previmgNumber => previmgNumber + 1);\n      }\n    });\n\n    if (node) {\n      observer.current.observe(node);\n    }\n\n    console.log(node);\n  }, [Loading]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: Styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }, \"Mas como esto\"), /*#__PURE__*/React.createElement(LoadingContext.Provider, {\n    value: {\n      Loading,\n      setLoading\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(FetchImagesFromApi, {\n    query: FirstTag(GetTags(history.location.state.tags)),\n    pageNumber: pageNumber,\n    render: (Loading, ImgArr) => {\n      return /*#__PURE__*/React.createElement(CardCollection, {\n        history: history,\n        lastImgElement: lastImgElement,\n        Loading: Loading,\n        ImgArr: ImgArr,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 8\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/Pin/MoreLikeThis/MoreLikeThis.js"],"names":["React","useContext","useState","useRef","useCallback","Styles","CardCollection","FetchImagesFromApi","LoadingContext","MoreLikeThis","props","history","Loading","setLoading","pageNumber","setPageNumber","observer","GetTags","tags","res","i","length","FirstTag","string","lastImgElement","node","current","disconnect","IntersectionObserver","entries","console","log","isIntersecting","previmgNumber","observe","wrapper","heading","location","state","ImgArr"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef, useCallback } from \"react\";\r\nimport Styles from \"./MoreLikeThis.module.css\";\r\n/* import PinsDisplaySection from \"./PinsDisplaySection/PinsDisplaySection\"; */\r\nimport CardCollection from \"../../CardCollection/CardCollection\";\r\nimport FetchImagesFromApi from \"../../FetchImagesFromApi/FetchImagesFromApi\";\r\n\r\nimport LoadingContext from \"../../../LoadingContext\";\r\nexport default function MoreLikeThis(props) {\r\n\t/* const { lastImgElement } = useInfiniteScroll(); */\r\n\tconst { history } = props;\r\n\tconst [Loading, setLoading] = useState(true);\r\n\tconst [pageNumber, setPageNumber] = useState(1);\r\n\tconst observer = useRef();\r\n\tconst GetTags = (tags) => {\r\n\t\tlet res = \"\";\r\n\t\tfor (let i = 0; i < tags.length - 1; i++) {\r\n\t\t\tif (tags[i] != \",\") {\r\n\t\t\t\tres = res + tags[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tconst FirstTag = (string) => {\r\n\t\tlet res = \"\";\r\n\t\tfor (let i = 0; i < string.length - 1; i++) {\r\n\t\t\tif (string[i] == \" \") break;\r\n\t\t\tres = res + string[i];\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tconst lastImgElement = useCallback(\r\n\t\t(node) => {\r\n\t\t\tif (Loading) return;\r\n\t\t\tif (observer.current) observer.current.disconnect();\r\n\r\n\t\t\tobserver.current = new IntersectionObserver((entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0].isIntersecting) {\r\n\t\t\t\t\tconsole.log(\"visible\");\r\n\t\t\t\t\tsetPageNumber((previmgNumber) => previmgNumber + 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (node) {\r\n\t\t\t\tobserver.current.observe(node);\r\n\t\t\t}\r\n\t\t\tconsole.log(node);\r\n\t\t},\r\n\t\t[Loading]\r\n\t);\r\n\treturn (\r\n\t\t<div className={Styles.wrapper}>\r\n\t\t\t<h3 className={Styles.heading}>Mas como esto</h3>\r\n\t\t\t<LoadingContext.Provider value={{ Loading, setLoading }}>\r\n\t\t\t\t<FetchImagesFromApi\r\n\t\t\t\t\tquery={FirstTag(GetTags(history.location.state.tags))}\r\n\t\t\t\t\tpageNumber={pageNumber}\r\n\t\t\t\t\trender={(Loading, ImgArr) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<CardCollection\r\n\t\t\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\t\t\tlastImgElement={lastImgElement}\r\n\t\t\t\t\t\t\t\tLoading={Loading}\r\n\t\t\t\t\t\t\t\tImgArr={ImgArr}\r\n\t\t\t\t\t\t\t></CardCollection>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t></FetchImagesFromApi>\r\n\t\t\t</LoadingContext.Provider>\r\n\t\t</div>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}