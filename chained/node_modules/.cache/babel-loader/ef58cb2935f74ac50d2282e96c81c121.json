{"ast":null,"code":"import { useState, useEffect, useContext, useRef } from 'react';\nimport SearchContext from '../../SearchContext';\nimport axios from 'axios';\n\nconst useCard = URL => {\n  const [imgArr, setimgArr] = useState([]);\n  const previmgArrRef = useRef();\n  useEffect(() => {\n    previmgArrRef.current = imgArr;\n  });\n  const previmgArr = previmgArrRef.current;\n  useEffect(previmgArr => {\n    let cancel;\n    console.log(previmgArr);\n    axios({\n      method: 'GET',\n      url: URL,\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(response => {\n      console.log(response.data);\n      setimgArr(previmgArr => {\n        return [...previmgArr, response.data.hits];\n      });\n    }).catch(err => {\n      if (axios.isCancel(err)) {\n        return;\n      }\n\n      console.log(err);\n    });\n    return cancel;\n  }, [URL]);\n  return [imgArr];\n};\n\nexport default useCard;","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/Home/useHome.js"],"names":["useState","useEffect","useContext","useRef","SearchContext","axios","useCard","URL","imgArr","setimgArr","previmgArrRef","current","previmgArr","cancel","console","log","method","url","cancelToken","CancelToken","c","then","response","data","hits","catch","err","isCancel"],"mappings":"AAAA,SAAQA,QAAR,EAAiBC,SAAjB,EAA2BC,UAA3B,EAAuCC,MAAvC,QAAoD,OAApD;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,MAAMC,OAAO,GAAIC,GAAD,IAAO;AACnB,QAAM,CAACC,MAAD,EAAQC,SAAR,IAAqBT,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAMU,aAAa,GAAGP,MAAM,EAA5B;AACAF,EAAAA,SAAS,CAAC,MAAI;AACVS,IAAAA,aAAa,CAACC,OAAd,GAAwBH,MAAxB;AACH,GAFQ,CAAT;AAGA,QAAMI,UAAU,GAAGF,aAAa,CAACC,OAAjC;AACAV,EAAAA,SAAS,CAAEW,UAAD,IAAc;AACpB,QAAIC,MAAJ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACAP,IAAAA,KAAK,CAAC;AACFW,MAAAA,MAAM,EAAG,KADP;AAEFC,MAAAA,GAAG,EAAGV,GAFJ;AAGFW,MAAAA,WAAW,EAAG,IAAIb,KAAK,CAACc,WAAV,CAAsBC,CAAC,IAAGP,MAAM,GAAIO,CAApC;AAHZ,KAAD,CAAL,CAKCC,IALD,CAKMC,QAAQ,IAAG;AACbR,MAAAA,OAAO,CAACC,GAAR,CAAYO,QAAQ,CAACC,IAArB;AACAd,MAAAA,SAAS,CAACG,UAAU,IAAG;AACnB,eAAO,CAAC,GAAGA,UAAJ,EAAeU,QAAQ,CAACC,IAAT,CAAcC,IAA7B,CAAP;AACH,OAFQ,CAAT;AAGH,KAVD,EAWCC,KAXD,CAWOC,GAAG,IAAE;AACR,UAAGrB,KAAK,CAACsB,QAAN,CAAeD,GAAf,CAAH,EAAuB;AACnB;AACH;;AACDZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,GAAZ;AACH,KAhBD;AAiBA,WAAOb,MAAP;AACH,GArBQ,EAqBP,CAACN,GAAD,CArBO,CAAT;AAsBA,SAAO,CAACC,MAAD,CAAP;AACH,CA9BD;;AA+BA,eAAeF,OAAf","sourcesContent":["import {useState,useEffect,useContext, useRef} from 'react';\r\nimport SearchContext from '../../SearchContext'\r\nimport axios from 'axios';\r\nconst useCard = (URL)=>{\r\n    const [imgArr,setimgArr] = useState([]);\r\n    const previmgArrRef = useRef();\r\n    useEffect(()=>{\r\n        previmgArrRef.current = imgArr;\r\n    })\r\n    const previmgArr = previmgArrRef.current;\r\n    useEffect((previmgArr)=>{\r\n        let cancel;\r\n        console.log(previmgArr)\r\n        axios({\r\n            method : 'GET',\r\n            url : URL,\r\n            cancelToken : new axios.CancelToken(c=> cancel  = c)\r\n        })\r\n        .then(response =>{\r\n            console.log(response.data);\r\n            setimgArr(previmgArr =>{\r\n                return [...previmgArr,response.data.hits];\r\n            });\r\n        })\r\n        .catch(err=>{\r\n            if(axios.isCancel(err)){\r\n                return\r\n            }\r\n            console.log(err)\r\n        })\r\n        return cancel;\r\n    },[URL])\r\n    return [imgArr];\r\n}\r\nexport default useCard;\r\n"]},"metadata":{},"sourceType":"module"}