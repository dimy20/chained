{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\FetchImagesFromApi\\\\FetchImagesFromApi.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport ImagesContext from \"../../ImagesContext\";\nimport LoadingContext from \"../../LoadingContext\";\nimport axios from \"axios\";\nexport default function FetchImagesFromApi(props) {\n  const {\n    render,\n    query,\n    pageNumber\n  } = props;\n  const {\n    Loading,\n    setLoading\n  } = useContext(LoadingContext);\n  const [Err, setErr] = useState(false);\n  const [ImgArr, setImgArr] = useState([]);\n  const {\n    ImgArrContext,\n    setImgArrContext\n  } = useContext(ImagesContext);\n  useEffect(() => {\n    setImgArrContext(ImgArr);\n    console.log(ImgArrContext);\n  }, [ImgArr]);\n  useEffect(() => {\n    setImgArr([]);\n  }, [query]);\n  useEffect(() => {\n    setLoading(true);\n    let cancel;\n    axios({\n      headers: {\n        \"Access-Control-Allow-Origin\": \"http://http://localhost:3000/\"\n      },\n      method: \"GET\",\n      url: `https://pixabay.com/api/?key=16381049-c197cfa5caeabac8c93d8da2c&q=${query}&image_type=photo&per_page=${28}&page=${pageNumber}`,\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(response => {\n      //FIX THIS REPETTITIOS\n      console.log(response.data.hits[0]);\n      setImgArr(prevImgs => {\n        return [...new Set([...prevImgs, ...response.data.hits])];\n      });\n      setLoading(false);\n    }).catch(err => {\n      //ignore everytime we cancel the request\n      if (axios.isCancel(err)) {\n        return;\n      }\n\n      setErr(true);\n    });\n    return () => cancel();\n  }, [query, pageNumber]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, render(Loading, ImgArr));\n}","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/FetchImagesFromApi/FetchImagesFromApi.js"],"names":["React","useContext","useState","useEffect","ImagesContext","LoadingContext","axios","FetchImagesFromApi","props","render","query","pageNumber","Loading","setLoading","Err","setErr","ImgArr","setImgArr","ImgArrContext","setImgArrContext","console","log","cancel","headers","method","url","cancelToken","CancelToken","c","then","response","data","hits","prevImgs","Set","catch","err","isCancel"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,cAAP,MAA2B,sBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AACjD,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAAgCH,KAAtC;AACA,QAAM;AAAEI,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAA0BZ,UAAU,CAACI,cAAD,CAA1C;AACA,QAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBb,QAAQ,CAAC,KAAD,CAA9B;AACA,QAAM,CAACc,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM;AAAEgB,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAAsClB,UAAU,CAACG,aAAD,CAAtD;AACAD,EAAAA,SAAS,CAAC,MAAM;AACfgB,IAAAA,gBAAgB,CAACH,MAAD,CAAhB;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYH,aAAZ;AACA,GAHQ,EAGN,CAACF,MAAD,CAHM,CAAT;AAIAb,EAAAA,SAAS,CAAC,MAAM;AACfc,IAAAA,SAAS,CAAC,EAAD,CAAT;AACA,GAFQ,EAEN,CAACP,KAAD,CAFM,CAAT;AAIAP,EAAAA,SAAS,CAAC,MAAM;AACfU,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIS,MAAJ;AACAhB,IAAAA,KAAK,CAAC;AACLiB,MAAAA,OAAO,EAAE;AACR,uCAA+B;AADvB,OADJ;AAILC,MAAAA,MAAM,EAAE,KAJH;AAKLC,MAAAA,GAAG,EAAG,qEAAoEf,KAAM,8BAA6B,EAAG,SAAQC,UAAW,EAL9H;AAMLe,MAAAA,WAAW,EAAE,IAAIpB,KAAK,CAACqB,WAAV,CAAuBC,CAAD,IAAQN,MAAM,GAAGM,CAAvC;AANR,KAAD,CAAL,CAQEC,IARF,CAQQC,QAAD,IAAc;AACnB;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmB,CAAnB,CAAZ;AACAf,MAAAA,SAAS,CAAEgB,QAAD,IAAc;AACvB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,QAAJ,EAAc,GAAGH,QAAQ,CAACC,IAAT,CAAcC,IAA/B,CAAR,CAAJ,CAAP;AACA,OAFQ,CAAT;AAGAnB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA,KAfF,EAgBEsB,KAhBF,CAgBSC,GAAD,IAAS;AACf;AACA,UAAI9B,KAAK,CAAC+B,QAAN,CAAeD,GAAf,CAAJ,EAAyB;AACxB;AACA;;AACDrB,MAAAA,MAAM,CAAC,IAAD,CAAN;AACA,KAtBF;AAuBA,WAAO,MAAMO,MAAM,EAAnB;AACA,GA3BQ,EA2BN,CAACZ,KAAD,EAAQC,UAAR,CA3BM,CAAT;AA4BA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMF,MAAM,CAACG,OAAD,EAAUI,MAAV,CAAZ,CAAP;AACA","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport ImagesContext from \"../../ImagesContext\";\r\nimport LoadingContext from \"../../LoadingContext\";\r\nimport axios from \"axios\";\r\nexport default function FetchImagesFromApi(props) {\r\n\tconst { render, query, pageNumber } = props;\r\n\tconst { Loading, setLoading } = useContext(LoadingContext);\r\n\tconst [Err, setErr] = useState(false);\r\n\tconst [ImgArr, setImgArr] = useState([]);\r\n\tconst { ImgArrContext, setImgArrContext } = useContext(ImagesContext);\r\n\tuseEffect(() => {\r\n\t\tsetImgArrContext(ImgArr);\r\n\t\tconsole.log(ImgArrContext);\r\n\t}, [ImgArr]);\r\n\tuseEffect(() => {\r\n\t\tsetImgArr([]);\r\n\t}, [query]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true);\r\n\t\tlet cancel;\r\n\t\taxios({\r\n\t\t\theaders: {\r\n\t\t\t\t\"Access-Control-Allow-Origin\": \"http://http://localhost:3000/\",\r\n\t\t\t},\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: `https://pixabay.com/api/?key=16381049-c197cfa5caeabac8c93d8da2c&q=${query}&image_type=photo&per_page=${28}&page=${pageNumber}`,\r\n\t\t\tcancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t//FIX THIS REPETTITIOS\r\n\t\t\t\tconsole.log(response.data.hits[0]);\r\n\t\t\t\tsetImgArr((prevImgs) => {\r\n\t\t\t\t\treturn [...new Set([...prevImgs, ...response.data.hits])];\r\n\t\t\t\t});\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t//ignore everytime we cancel the request\r\n\t\t\t\tif (axios.isCancel(err)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetErr(true);\r\n\t\t\t});\r\n\t\treturn () => cancel();\r\n\t}, [query, pageNumber]);\r\n\treturn <div>{render(Loading, ImgArr)}</div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}