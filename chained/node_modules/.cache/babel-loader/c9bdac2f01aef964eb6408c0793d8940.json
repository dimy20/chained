{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\Home\\\\Home.js\";\nimport React, { useState, useContext, useEffect, useRef, useCallback } from \"react\";\nimport Styles from \"./Home.module.css\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\"; //components\n\nimport Card from \"./Card/Card\";\nimport CardCollection from \"../CardCollection/CardCollection\";\nimport FetchImagesFromApi from \"../FetchImagesFromApi/FetchImagesFromApi\"; //hooks\n//context\n\nimport SearchContext from \"../../SearchContext\";\nimport ImagesContext from \"../../ImagesContext\";\nimport LoadingContext from \"../../LoadingContext\";\n\nconst Home = ({\n  history\n}) => {\n  const [user, setUSer] = useState({});\n  const [redirect, setRidirect] = useState(false);\n  const {\n    SearchString,\n    setSearchString\n  } = useContext(SearchContext);\n  console.log(SearchString);\n  const [imgNumber, setimgNumber] = useState(1);\n  const [Loading, setLoading] = useState(true);\n  /* const [lastImgElement] = useInfiniteScroll(Loading); */\n\n  console.log(\"History :::\", history);\n  const observer = useRef();\n  const lastImgElement = useCallback(node => {\n    if (Loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      console.log(entries);\n\n      if (entries[0].isIntersecting) {\n        console.log(\"visible\");\n        setimgNumber(previmgNumber => previmgNumber + 1);\n      }\n    });\n\n    if (node) {\n      observer.current.observe(node);\n    }\n\n    console.log(node);\n  }, [Loading]);\n  useEffect(() => {\n    axios({\n      method: \"POST\",\n      url: \"https://api.imgur.com/oauth2/authorize?client_id=5dfc22e72ea94c0&response_type=token\"\n    }).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://localhost:5000/\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    }).then(res => {\n      res.json().then(data => {\n        if (data) {\n          setUSer(data);\n        } else {\n          localStorage.removeItem(\"token\");\n        }\n\n        console.log(data);\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: Styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(LoadingContext.Provider, {\n    value: {\n      Loading,\n      setLoading\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(FetchImagesFromApi, {\n    query: SearchString,\n    pageNumber: imgNumber,\n    render: (Loading, ImgArr) => {\n      console.log(\"heloooo\", ImgArr);\n      return /*#__PURE__*/React.createElement(CardCollection, {\n        history: history,\n        lastImgElement: lastImgElement,\n        Loading: Loading,\n        ImgArr: ImgArr,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 8\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/Home/Home.js"],"names":["React","useState","useContext","useEffect","useRef","useCallback","Styles","CircularProgress","axios","Redirect","Card","CardCollection","FetchImagesFromApi","SearchContext","ImagesContext","LoadingContext","Home","history","user","setUSer","redirect","setRidirect","SearchString","setSearchString","console","log","imgNumber","setimgNumber","Loading","setLoading","observer","lastImgElement","node","current","disconnect","IntersectionObserver","entries","isIntersecting","previmgNumber","observe","method","url","then","res","catch","err","fetch","headers","Authorization","localStorage","token","json","data","removeItem","container","ImgArr"],"mappings":"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","sourcesContent":["import React, {\r\n\tuseState,\r\n\tuseContext,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseCallback,\r\n} from \"react\";\r\nimport Styles from \"./Home.module.css\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\n//components\r\nimport Card from \"./Card/Card\";\r\nimport CardCollection from \"../CardCollection/CardCollection\";\r\nimport FetchImagesFromApi from \"../FetchImagesFromApi/FetchImagesFromApi\";\r\n//hooks\r\n\r\n//context\r\nimport SearchContext from \"../../SearchContext\";\r\nimport ImagesContext from \"../../ImagesContext\";\r\nimport LoadingContext from \"../../LoadingContext\";\r\nconst Home = ({ history }) => {\r\n\tconst [user, setUSer] = useState({});\r\n\tconst [redirect, setRidirect] = useState(false);\r\n\tconst { SearchString, setSearchString } = useContext(SearchContext);\r\n\tconsole.log(SearchString);\r\n\tconst [imgNumber, setimgNumber] = useState(1);\r\n\tconst [Loading, setLoading] = useState(true);\r\n\t/* const [lastImgElement] = useInfiniteScroll(Loading); */\r\n\tconsole.log(\"History :::\", history);\r\n\tconst observer = useRef();\r\n\tconst lastImgElement = useCallback(\r\n\t\t(node) => {\r\n\t\t\tif (Loading) return;\r\n\t\t\tif (observer.current) observer.current.disconnect();\r\n\r\n\t\t\tobserver.current = new IntersectionObserver((entries) => {\r\n\t\t\t\tconsole.log(entries);\r\n\t\t\t\tif (entries[0].isIntersecting) {\r\n\t\t\t\t\tconsole.log(\"visible\");\r\n\t\t\t\t\tsetimgNumber((previmgNumber) => previmgNumber + 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (node) {\r\n\t\t\t\tobserver.current.observe(node);\r\n\t\t\t}\r\n\t\t\tconsole.log(node);\r\n\t\t},\r\n\t\t[Loading]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\taxios({\r\n\t\t\tmethod: \"POST\",\r\n\t\t\turl:\r\n\t\t\t\t\"https://api.imgur.com/oauth2/authorize?client_id=5dfc22e72ea94c0&response_type=token\",\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch(\"http://localhost:5000/\", {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${localStorage.token}`,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tres.json().then((data) => {\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tsetUSer(data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"token\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={Styles.container}>\r\n\t\t\t<LoadingContext.Provider value={{ Loading, setLoading }}>\r\n\t\t\t\t<FetchImagesFromApi\r\n\t\t\t\t\tquery={SearchString}\r\n\t\t\t\t\tpageNumber={imgNumber}\r\n\t\t\t\t\trender={(Loading, ImgArr) => {\r\n\t\t\t\t\t\tconsole.log(\"heloooo\", ImgArr);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<CardCollection\r\n\t\t\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\t\t\tlastImgElement={lastImgElement}\r\n\t\t\t\t\t\t\t\tLoading={Loading}\r\n\t\t\t\t\t\t\t\tImgArr={ImgArr}\r\n\t\t\t\t\t\t\t></CardCollection>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t></FetchImagesFromApi>\r\n\t\t\t</LoadingContext.Provider>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}