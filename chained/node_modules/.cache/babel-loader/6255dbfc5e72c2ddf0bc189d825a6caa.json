{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usuario\\\\desktop\\\\chained\\\\chained\\\\src\\\\Components\\\\SignupModal\\\\SignupModal.js\";\nimport React, { useState } from \"react\";\nimport { Modal, Button, Form, Container, Alert, Spinner } from \"react-bootstrap\";\nimport joi from \"joi\";\nimport SpinnerSvg from \"../../Assests/spinner.svg\";\nimport { TextareaAutosize } from \"@material-ui/core\";\nexport default function SignupModal(props) {\n  const {\n    isOpen,\n    handleClose,\n    history\n  } = props;\n  const [user, setUser] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    repeat_password: \"\"\n  });\n  const [ErrorAlert, setErrorAlert] = useState({\n    message: \"\",\n    showError: false\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const schema = joi.object({\n    username: joi.string().alphanum().min(5).max(30).required(),\n    email: joi.string().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: [\"com\", \"net\"]\n      }\n    }),\n    password: joi.string().min(8).required(),\n    repeat_password: joi.ref(\"password\")\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const {\n      error,\n      value\n    } = schema.validate({\n      username: user.username,\n      email: user.email,\n      password: user.password,\n      repeat_password: user.repeat_password\n    });\n\n    if (!error) {\n      setIsSubmitting(true); //Valid data from the form\n      //Api call to auth/signup\n\n      fetch(\"http://localhost:5000/auth/signup\", {\n        method: \"POST\",\n        body: JSON.stringify(value),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        setTimeout(() => {\n          setIsSubmitting(false); //REDIRECTS TO HOME, JUST FOR NOW, CHANGE THIS!!\n\n          /* history.push({\r\n          \tpathname: \"/following\",\r\n                            }); */\n\n          /*If some error occurred, res will como in the format of an json error\r\n                                handled in index.js */\n\n          if (res.status !== 200) {\n            res.json().then(data => {\n              console.log();\n              setErrorAlert({\n                message: data.error.message,\n                showError: true\n              });\n            }).catch(err => {\n              console.log(err);\n            });\n          } else {\n            //No error occured all\n            // Ridirects user to login page!\n            console.log(\"ALL GOOD\");\n          }\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      //Removes double quotes\n      const messageError = error.details[0].message.replace(/['\"]+/g, \"\");\n      setErrorAlert({\n        message: messageError,\n        showError: true\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: isOpen,\n    onHide: handleClose,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    style: {\n      fontWeight: \"bold\",\n      fontSize: \"30px\",\n      border: \"2p solid red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, \"Sign up\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n    style: {\n      height: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 6\n    }\n  }, !isSubmitting && /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    show: ErrorAlert.showError,\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"grid\",\n      gridTemplateColumns: \"80% 20%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, ErrorAlert.message, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      width: \"60%\",\n      padding: \"2px\",\n      justifySelf: \"end\"\n    },\n    onClick: () => {\n      setErrorAlert({ ...ErrorAlert,\n        showError: false\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 12\n    }\n  }, \"Ok\"))), /*#__PURE__*/React.createElement(Form.Text, {\n    style: {\n      fontWeight: \"bold\",\n      fontSize: \"17px\",\n      color: \"black\"\n    },\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 10\n    }\n  }, \"Discover new ideas and have fun!\")), /*#__PURE__*/React.createElement(Form.Group, {\n    onChange: e => {\n      setUser({ ...user,\n        username: e.target.value\n      });\n    },\n    controlId: \"formBasicUserName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter your userName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    onChange: e => {\n      setUser({ ...user,\n        email: e.target.value\n      });\n    },\n    controlId: \"formBasicEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Enter your email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    onChange: e => {\n      setUser({ ...user,\n        password: e.target.value\n      });\n    },\n    controlId: \"formBasicPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Enter your password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    onChange: e => {\n      setUser({ ...user,\n        repeat_password: e.target.value\n      });\n    },\n    controlId: \"RepeatPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Repeat your password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, \"Signup\")), isSubmitting && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"300px\",\n      display: \"grid\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      justifySelf: \"center\",\n      alignSelf: \"center\"\n    },\n    src: SpinnerSvg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 5\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/usuario/desktop/chained/chained/src/Components/SignupModal/SignupModal.js"],"names":["React","useState","Modal","Button","Form","Container","Alert","Spinner","joi","TextareaAutosize","SignupModal","props","isOpen","handleClose","history","user","setUser","username","email","password","repeat_password","ErrorAlert","setErrorAlert","message","showError","isSubmitting","setIsSubmitting","schema","object","string","alphanum","min","max","required","minDomainSegments","tlds","allow","ref","handleSubmit","e","preventDefault","error","value","validate","fetch","method","body","JSON","stringify","headers","then","res","setTimeout","status","json","data","console","log","catch","err","messageError","details","replace","fontWeight","fontSize","border","height","display","gridTemplateColumns","width","padding","justifySelf","color","target","alignSelf","SpinnerSvg"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n\tModal,\r\n\tButton,\r\n\tForm,\r\n\tContainer,\r\n\tAlert,\r\n\tSpinner,\r\n} from \"react-bootstrap\";\r\nimport joi from \"joi\";\r\nimport SpinnerSvg from \"../../Assests/spinner.svg\";\r\nimport { TextareaAutosize } from \"@material-ui/core\";\r\nexport default function SignupModal(props) {\r\n\tconst { isOpen, handleClose, history } = props;\r\n\tconst [user, setUser] = useState({\r\n\t\tusername: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\trepeat_password: \"\",\r\n\t});\r\n\tconst [ErrorAlert, setErrorAlert] = useState({\r\n\t\tmessage: \"\",\r\n\t\tshowError: false,\r\n\t});\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\tconst schema = joi.object({\r\n\t\tusername: joi.string().alphanum().min(5).max(30).required(),\r\n\t\temail: joi.string().email({\r\n\t\t\tminDomainSegments: 2,\r\n\t\t\ttlds: { allow: [\"com\", \"net\"] },\r\n\t\t}),\r\n\t\tpassword: joi.string().min(8).required(),\r\n\t\trepeat_password: joi.ref(\"password\"),\r\n\t});\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst { error, value } = schema.validate({\r\n\t\t\tusername: user.username,\r\n\t\t\temail: user.email,\r\n\t\t\tpassword: user.password,\r\n\t\t\trepeat_password: user.repeat_password,\r\n\t\t});\r\n\t\tif (!error) {\r\n\t\t\tsetIsSubmitting(true);\r\n\t\t\t//Valid data from the form\r\n\t\t\t//Api call to auth/signup\r\n\t\t\tfetch(\"http://localhost:5000/auth/signup\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tbody: JSON.stringify(value),\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetIsSubmitting(false);\r\n\t\t\t\t\t\t//REDIRECTS TO HOME, JUST FOR NOW, CHANGE THIS!!\r\n\t\t\t\t\t\t/* history.push({\r\n\t\t\t\t\t\t\tpathname: \"/following\",\r\n                        }); */\r\n\t\t\t\t\t\t/*If some error occurred, res will como in the format of an json error\r\n                            handled in index.js */\r\n\r\n\t\t\t\t\t\tif (res.status !== 200) {\r\n\t\t\t\t\t\t\tres\r\n\t\t\t\t\t\t\t\t.json()\r\n\t\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log();\r\n\t\t\t\t\t\t\t\t\tsetErrorAlert({\r\n\t\t\t\t\t\t\t\t\t\tmessage: data.error.message,\r\n\t\t\t\t\t\t\t\t\t\tshowError: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//No error occured all\r\n\t\t\t\t\t\t\t// Ridirects user to login page!\r\n\t\t\t\t\t\t\tconsole.log(\"ALL GOOD\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\t//Removes double quotes\r\n\t\t\tconst messageError = error.details[0].message.replace(/['\"]+/g, \"\");\r\n\t\t\tsetErrorAlert({\r\n\t\t\t\tmessage: messageError,\r\n\t\t\t\tshowError: true,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Modal show={isOpen} onHide={handleClose} centered>\r\n\t\t\t\t<Modal.Header>\r\n\t\t\t\t\t<Modal.Title\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\tfontSize: \"30px\",\r\n\t\t\t\t\t\t\tborder: \"2p solid red\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Container>Sign up</Container>\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body style={{ height: \"50%\" }}>\r\n\t\t\t\t\t<div style={{ height: \"300px\" }}>\r\n\t\t\t\t\t\t{!isSubmitting && (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Alert show={ErrorAlert.showError} variant=\"danger\">\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tgridTemplateColumns: \"80% 20%\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ErrorAlert.message}\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"60%\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: \"2px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjustifySelf: \"end\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetErrorAlert({ ...ErrorAlert, showError: false });\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tOk\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t<Form.Text\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: \"17px\",\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-muted\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tDiscover new ideas and have fun!\r\n\t\t\t\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUser({ ...user, username: e.target.value });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"formBasicUserName\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your userName\"\r\n\t\t\t\t\t\t\t\t\t></Form.Control>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUser({ ...user, email: e.target.value });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"formBasicEmail\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your email\"\r\n\t\t\t\t\t\t\t\t\t></Form.Control>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUser({ ...user, password: e.target.value });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"formBasicPassword\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your password\"\r\n\t\t\t\t\t\t\t\t\t></Form.Control>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUser({ ...user, repeat_password: e.target.value });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"RepeatPassword\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Repeat your password\"\r\n\t\t\t\t\t\t\t\t\t></Form.Control>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Button type=\"submit\">Signup</Button>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\theight: \"300px\",\r\n\t\t\t\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tstyle={{ justifySelf: \"center\", alignSelf: \"center\" }}\r\n\t\t\t\t\t\t\t\t\tsrc={SpinnerSvg}\r\n\t\t\t\t\t\t\t\t></img>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer></Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}